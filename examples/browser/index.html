<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>PDFStudio Browser - Complete Test Suite | Powered by PDF UI Studio</title>
  <style>
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      max-width: 1400px;
      margin: 0 auto;
      padding: 20px;
      background: linear-gradient(135deg, #7C3AED 0%, #5B21B6 100%);
      min-height: 100vh;
    }

    .container {
      background: white;
      border-radius: 12px;
      padding: 30px;
      box-shadow: 0 10px 40px rgba(0,0,0,0.2);
    }

    h1 {
      color: #7C3AED;
      margin-bottom: 10px;
    }

    h2 {
      color: #5B21B6;
      margin-top: 40px;
      margin-bottom: 15px;
      padding-bottom: 10px;
      border-bottom: 2px solid #f0f0f0;
    }

    .subtitle {
      color: #666;
      margin-bottom: 30px;
    }

    .examples {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
      gap: 12px;
      margin-bottom: 30px;
    }

    button {
      background: linear-gradient(135deg, #7C3AED 0%, #5B21B6 100%);
      color: white;
      border: none;
      padding: 12px 20px;
      border-radius: 8px;
      cursor: pointer;
      font-size: 14px;
      font-weight: 600;
      transition: all 0.3s;
      width: 100%;
      text-align: left;
    }

    button:hover {
      transform: translateY(-2px);
      box-shadow: 0 5px 15px rgba(124, 58, 237, 0.4);
    }

    button:active {
      transform: translateY(0);
    }

    .info {
      background: #f8f9fa;
      padding: 20px;
      border-radius: 8px;
      border-left: 4px solid #7C3AED;
    }

    .info h3 {
      margin-top: 0;
      color: #7C3AED;
    }

    .status {
      margin-top: 20px;
      padding: 15px;
      border-radius: 8px;
      display: none;
    }

    .status.success {
      background: #d4edda;
      color: #155724;
      border: 1px solid #c3e6cb;
      display: block;
    }

    .status.error {
      background: #f8d7da;
      color: #721c24;
      border: 1px solid #f5c6cb;
      display: block;
    }

    code {
      background: #f4f4f4;
      padding: 2px 6px;
      border-radius: 3px;
      font-family: 'Courier New', monospace;
    }

    .sponsor-banner {
      background: linear-gradient(135deg, #7C3AED 0%, #5B21B6 100%);
      color: white;
      padding: 25px;
      border-radius: 12px;
      margin: 25px 0;
      text-align: center;
      box-shadow: 0 8px 30px rgba(124, 58, 237, 0.3);
      border: 3px solid rgba(255, 255, 255, 0.2);
    }

    .sponsor-banner h2 {
      color: white;
      margin: 0 0 10px 0;
      padding: 0;
      border: none;
      font-size: 24px;
    }

    .sponsor-banner p {
      margin: 8px 0;
      font-size: 15px;
      opacity: 0.95;
    }

    .sponsor-banner .features {
      display: flex;
      justify-content: center;
      gap: 30px;
      margin: 15px 0;
      flex-wrap: wrap;
    }

    .sponsor-banner .feature-item {
      font-size: 14px;
      font-weight: 600;
    }

    .sponsor-banner a {
      display: inline-block;
      background: white;
      color: #7C3AED;
      padding: 12px 30px;
      border-radius: 8px;
      text-decoration: none;
      font-weight: 700;
      margin-top: 15px;
      transition: all 0.3s;
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
    }

    .sponsor-banner a:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 20px rgba(0, 0, 0, 0.3);
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>üé® PDFStudio Browser - Complete Test Suite</h1>
    <p class="subtitle">Comprehensive test of ALL PDFStudio features in the browser</p>

    <!-- PDF UI Studio Sponsor Banner -->
    <div class="sponsor-banner">
      <h2>üé® Design PDFs Visually with PDF UI Studio</h2>
      <p>Stop writing code from scratch‚Äîdesign your PDF layouts with drag & drop and export production-ready JavaScript instantly!</p>
      <div class="features">
        <span class="feature-item">‚ú® AI-Powered Templates</span>
        <span class="feature-item">üéØ Real-Time Preview</span>
        <span class="feature-item">üíª Export Clean Code</span>
        <span class="feature-item">üöÄ Free to Start</span>
      </div>
      <a href="https://pdfuistudio.io/?ref=pdfstudio-browser-demo" target="_blank">Try Visual Editor (Free) ‚Üí</a>
    </div>

    <div class="info">
      <h3>‚ú® Testing All Features</h3>
      <p>This page tests every single feature of PDFStudio to ensure browser compatibility. Click any button to generate and download a PDF.</p>
    </div>

    <!-- TEXT FEATURES -->
    <h2>üìù Text Features</h2>
    <div class="examples">
      <button onclick="testTextBasic()">Basic Text</button>
      <button onclick="testTextFonts()">Different Fonts</button>
      <button onclick="testTextSizes()">Different Sizes</button>
      <button onclick="testTextColors()">Text Colors</button>
      <button onclick="testTextAlignment()">Text Alignment</button>
    </div>

    <!-- ADVANCED TEXT FEATURES (v0.3.1) -->
    <h2>‚ú® Advanced Text Layout (v0.3.1)</h2>
    <div class="examples">
      <button onclick="testEllipsis()">Ellipsis - Text Truncation</button>
      <button onclick="testParagraphGap()">Paragraph Gap - Spacing</button>
      <button onclick="testEllipsisParagraphGap()">Combined Example</button>
    </div>

    <!-- SHAPES -->
    <h2>‚¨ú Shapes & Lines</h2>
    <div class="examples">
      <button onclick="testRectangles()">Rectangles</button>
      <button onclick="testCircles()">Circles</button>
      <button onclick="testLines()">Lines</button>
      <button onclick="testPolygons()">Polygons</button>
      <button onclick="testPaths()">Custom Paths</button>
    </div>

    <!-- COLORS -->
    <h2>üé® Colors & Styles</h2>
    <div class="examples">
      <button onclick="testFillColors()">Fill Colors (RGB)</button>
      <button onclick="testStrokeColors()">Stroke Colors</button>
      <button onclick="testLineWidths()">Line Widths</button>
      <button onclick="testOpacity()">Opacity/Transparency</button>
    </div>

    <!-- IMAGES -->
    <h2>üñºÔ∏è Images</h2>
    <div class="examples">
      <button onclick="testImageBasic()">Basic Image</button>
      <button onclick="testImageSizes()">Image Scaling</button>
      <button onclick="testImagePositions()">Image Positioning</button>
      <button onclick="testMultipleImages()">Multiple Images</button>
    </div>

    <!-- TABLES -->
    <h2>üìä Tables</h2>
    <div class="examples">
      <button onclick="testTableBasic()">Basic Table</button>
      <button onclick="testTableStyled()">Styled Table</button>
      <button onclick="testTableComplex()">Complex Table</button>
      <button onclick="testTableLarge()">Large Table</button>
    </div>

    <!-- CHARTS -->
    <h2>üìà Charts</h2>
    <div class="examples">
      <button onclick="testBarChart()">Bar Chart</button>
      <button onclick="testLineChart()">Line Chart</button>
      <button onclick="testPieChart()">Pie Chart</button>
      <button onclick="testMultipleCharts()">Multiple Charts</button>
    </div>

    <!-- QR CODES -->
    <h2>üî≥ QR Codes</h2>
    <div class="examples">
      <button onclick="testQRURL()">QR Code - URL</button>
      <button onclick="testQRText()">QR Code - Text</button>
      <button onclick="testQREmail()">QR Code - Email</button>
      <button onclick="testQRPhone()">QR Code - Phone</button>
      <button onclick="testQRWiFi()">QR Code - WiFi</button>
      <button onclick="testQRVCard()">QR Code - vCard</button>
    </div>

    <!-- WATERMARKS -->
    <h2>üíß Watermarks</h2>
    <div class="examples">
      <button onclick="testWatermarkText()">Text Watermark</button>
      <button onclick="testWatermarkImage()">Image Watermark</button>
      <button onclick="testWatermarkRotated()">Rotated Watermark</button>
      <button onclick="testWatermarkTransparent()">Transparent Watermark</button>
    </div>

    <!-- MULTI-PAGE -->
    <h2>üìÑ Multi-Page & Layout</h2>
    <div class="examples">
      <button onclick="testMultiplePagesBasic()">Multiple Pages</button>
      <button onclick="testHeadersFooters()">Headers & Footers</button>
      <button onclick="testPageNumbers()">Page Numbers</button>
      <button onclick="testMargins()">Custom Margins</button>
      <button onclick="testPageBreaks()">Auto Page Breaks</button>
    </div>

    <!-- TRANSFORMATIONS -->
    <h2>üîÑ Transformations</h2>
    <div class="examples">
      <button onclick="testRotation()">Rotation</button>
      <button onclick="testScaling()">Scaling</button>
      <button onclick="testTranslation()">Translation</button>
    </div>

    <!-- ADVANCED -->
    <h2>‚ö° Advanced Features</h2>
    <div class="examples">
      <button onclick="testLinks()">Hyperlinks</button>
      <button onclick="testMetadata()">Document Metadata</button>
      <button onclick="testEncryption()">Encryption/Security <span style="font-size: 10px; opacity: 0.8;">üîê user: user123 | owner: owner456</span></button>
      <button onclick="testAttachments()">File Attachments</button>
    </div>

    <!-- REAL-WORLD -->
    <h2>üåü Real-World Examples</h2>
    <div class="examples">
      <button onclick="generateInvoice()">Invoice</button>
      <button onclick="generateReport()">Business Report</button>
      <button onclick="generateCertificate()">Certificate</button>
      <button onclick="generateFlyer()">Marketing Flyer</button>
      <button onclick="generateResume()">Resume/CV</button>
    </div>

    <div id="status" class="status"></div>
  </div>

  <!-- Load PDFStudio library -->
  <script src="../../dist/pdfstudio.standalone.js"></script>

  <script>
    // Helper to show status messages
    function showStatus(message, isError = false) {
      const statusEl = document.getElementById('status');
      statusEl.textContent = message;
      statusEl.className = 'status ' + (isError ? 'error' : 'success');

      if (!isError) {
        setTimeout(() => {
          statusEl.style.display = 'none';
        }, 5000);
      }
    }

    // Helper to create demo image
    async function createDemoImage(width, height, text) {
      const canvas = document.createElement('canvas');
      canvas.width = width;
      canvas.height = height;
      const ctx = canvas.getContext('2d');

      const gradient = ctx.createLinearGradient(0, 0, width, height);
      gradient.addColorStop(0, '#7C3AED');
      gradient.addColorStop(1, '#5B21B6');
      ctx.fillStyle = gradient;
      ctx.fillRect(0, 0, width, height);

      ctx.fillStyle = 'white';
      ctx.font = 'bold 20px Arial';
      ctx.textAlign = 'center';
      ctx.fillText(text, width / 2, height / 2);

      const blob = await new Promise((resolve) => canvas.toBlob(resolve, 'image/png'));
      const arrayBuffer = await blob.arrayBuffer();
      return Buffer.from(arrayBuffer);
    }

    // ========== TEXT FEATURES ==========

    async function testTextBasic() {
      try {
        const { PDFDocument } = PDFStudio;
        const doc = new PDFDocument({ title: 'Text Basic Test' });

        doc.text('Basic Text Test', 50, 750, 24, 'Helvetica-Bold');
        doc.text('This is a simple text line', 50, 720, 12);
        doc.text('Different line with more content to display', 50, 700, 12);

        doc.text('X: 50, Y: 680', 50, 680, 10, 'Courier');
        doc.text('X: 200, Y: 660', 200, 660, 10, 'Courier');
        doc.text('X: 350, Y: 640', 350, 640, 10, 'Courier');

        await doc.save('test-text-basic.pdf');
        showStatus('‚úÖ Basic text test completed!');
      } catch (error) {
        showStatus('‚ùå Error: ' + error.message, true);
        console.error(error);
      }
    }

    async function testTextFonts() {
      try {
        const { PDFDocument } = PDFStudio;
        const doc = new PDFDocument({ title: 'Text Fonts Test' });

        doc.text('Font Test - PDFStudio', 50, 750, 20, 'Helvetica-Bold');

        const fonts = [
          'Helvetica',
          'Helvetica-Bold',
          'Helvetica-Oblique',
          'Helvetica-BoldOblique',
          'Times-Roman',
          'Times-Bold',
          'Times-Italic',
          'Times-BoldItalic',
          'Courier',
          'Courier-Bold',
          'Courier-Oblique',
          'Courier-BoldOblique'
        ];

        let y = 700;
        fonts.forEach(font => {
          doc.text(`This is ${font}`, 50, y, 12, font);
          y -= 25;
        });

        await doc.save('test-text-fonts.pdf');
        showStatus('‚úÖ Font test completed!');
      } catch (error) {
        showStatus('‚ùå Error: ' + error.message, true);
        console.error(error);
      }
    }

    async function testTextSizes() {
      try {
        const { PDFDocument } = PDFStudio;
        const doc = new PDFDocument({ title: 'Text Sizes Test' });

        doc.text('Text Size Test', 50, 750, 20, 'Helvetica-Bold');

        const sizes = [8, 10, 12, 14, 16, 18, 20, 24, 28, 32, 36, 40];
        let y = 700;

        sizes.forEach(size => {
          doc.text(`Size ${size}pt`, 50, y, size, 'Helvetica');
          y -= (size + 10);
        });

        await doc.save('test-text-sizes.pdf');
        showStatus('‚úÖ Text size test completed!');
      } catch (error) {
        showStatus('‚ùå Error: ' + error.message, true);
        console.error(error);
      }
    }

    async function testTextColors() {
      try {
        const { PDFDocument } = PDFStudio;
        const doc = new PDFDocument({ title: 'Text Colors Test' });

        doc.text('Text Color Test', 50, 750, 20, 'Helvetica-Bold');

        const colors = [
          { r: 1, g: 0, b: 0, name: 'Red' },
          { r: 0, g: 1, b: 0, name: 'Green' },
          { r: 0, g: 0, b: 1, name: 'Blue' },
          { r: 1, g: 1, b: 0, name: 'Yellow' },
          { r: 1, g: 0, b: 1, name: 'Magenta' },
          { r: 0, g: 1, b: 1, name: 'Cyan' },
          { r: 0.5, g: 0, b: 0.5, name: 'Purple' },
          { r: 1, g: 0.5, b: 0, name: 'Orange' },
          { r: 0, g: 0, b: 0, name: 'Black' },
          { r: 0.5, g: 0.5, b: 0.5, name: 'Gray' }
        ];

        let y = 700;
        colors.forEach(color => {
          doc.setFillColor(color.r, color.g, color.b);
          doc.text(`This text is ${color.name}`, 50, y, 16, 'Helvetica-Bold');
          y -= 30;
        });

        await doc.save('test-text-colors.pdf');
        showStatus('‚úÖ Text color test completed!');
      } catch (error) {
        showStatus('‚ùå Error: ' + error.message, true);
        console.error(error);
      }
    }

    async function testTextAlignment() {
      try {
        const { PDFDocument } = PDFStudio;
        const doc = new PDFDocument({ title: 'Text Alignment Test' });

        doc.text('Text Alignment Test', 50, 750, 20, 'Helvetica-Bold');

        // Left aligned
        doc.setFillColor(0, 0, 0);
        doc.text('Left Aligned Text (Default)', 50, 700, 14, 'Helvetica-Bold');
        doc.text('This is left aligned text at X=50', 50, 680, 12);

        // Center reference line
        doc.setStrokeColor(0.8, 0.8, 0.8);
        doc.setLineWidth(1);
        doc.moveTo(306, 650);
        doc.lineTo(306, 600);
        doc.stroke();

        doc.setFillColor(0, 0, 0);
        doc.text('Center Aligned Text', 306, 650, 14, 'Helvetica-Bold');
        doc.text('This should be centered at X=306 (page center)', 306, 630, 12);

        // Right reference line
        doc.setStrokeColor(0.8, 0.8, 0.8);
        doc.moveTo(550, 580);
        doc.lineTo(550, 530);
        doc.stroke();

        doc.setFillColor(0, 0, 0);
        doc.text('Right Aligned Text', 550, 580, 14, 'Helvetica-Bold');
        doc.text('This should be right aligned at X=550', 550, 560, 12);

        await doc.save('test-text-alignment.pdf');
        showStatus('‚úÖ Text alignment test completed!');
      } catch (error) {
        showStatus('‚ùå Error: ' + error.message, true);
        console.error(error);
      }
    }

    // ========== ADVANCED TEXT FEATURES (v0.3.1) ==========

    async function testEllipsis() {
      try {
        const { PDFDocument } = PDFStudio;
        const doc = new PDFDocument({ title: 'Ellipsis Feature Test' });

        doc.text('Ellipsis Feature (v0.3.1)', 50, 750, 20, 'Helvetica-Bold');
        doc.text('Automatically truncate text that exceeds available height', 50, 730, 11, 'Helvetica', {
          paragraphGap: 20
        });

        // Example 1: Default ellipsis
        doc.setFillColor(0.2, 0.2, 0.2);
        doc.text('Example 1: Default Ellipsis "..."', 50, doc.getCurrentY(), 14, 'Helvetica-Bold', {
          paragraphGap: 8
        });

        const longText1 = 'This is a very long text that will be automatically truncated when it exceeds the available height. The ellipsis feature adds "..." at the end to indicate there is more content. This is perfect for creating previews, summaries, or fitting content into fixed-size boxes. '.repeat(3);

        // Draw box
        doc.setStrokeColor(0.8, 0.8, 0.9);
        doc.setLineWidth(1);
        doc.roundedRect(50, doc.getCurrentY() - 80, 250, 80, 4);
        doc.stroke();

        doc.setFillColor(0.3, 0.3, 0.3);
        doc.text(longText1, {
          x: 58,
          y: doc.getCurrentY() - 8,
          width: 234,
          height: 64,
          fontSize: 10,
          lineGap: 2,
          ellipsis: true  // Default "..."
        });

        // Example 2: Custom ellipsis
        doc.setFillColor(0.2, 0.2, 0.2);
        doc.text('Example 2: Custom Ellipsis "...[Read More]"', 320, 670, 14, 'Helvetica-Bold');

        const longText2 = 'Custom ellipsis allows you to provide context about truncated content. Instead of just "..." you can use "...[Read More]" or "‚Ä¶ (continued)" to make it clear there is more content available. This is commonly used in newsletters and article previews. '.repeat(3);

        // Draw box
        doc.setStrokeColor(0.8, 0.8, 0.9);
        doc.roundedRect(320, 582, 250, 80, 4);
        doc.stroke();

        doc.setFillColor(0.3, 0.3, 0.3);
        doc.text(longText2, {
          x: 328,
          y: 574,
          width: 234,
          height: 64,
          fontSize: 10,
          lineGap: 2,
          ellipsis: '...[Read More]'  // Custom ellipsis
        });

        // Example 3: Product card
        doc.setFillColor(0.2, 0.2, 0.2);
        doc.text('Example 3: Product Card', 50, 500, 14, 'Helvetica-Bold');

        // Product card background
        doc.setFillColor(0.98, 0.98, 1);
        doc.roundedRect(50, 350, 510, 130, 8);
        doc.fill();

        doc.setFillColor(0.1, 0.1, 0.1);
        doc.text('Premium Wireless Headphones', 65, 465, 16, 'Helvetica-Bold');
        doc.setFillColor(0.31, 0.27, 0.90);
        doc.text('$349.99', 490, 465, 16, 'Helvetica-Bold');

        const productDesc = 'Industry-leading noise cancellation technology with exceptional sound quality. Features 30-hour battery life, multipoint connection, and premium comfort padding. Perfect for travel, work, and entertainment. Includes USB-C charging, 3.5mm cable, and carrying case. Available in Black, Silver, and Blue. Advanced audio processing delivers rich, immersive sound across all frequencies.';

        doc.setFillColor(0.95, 0.95, 0.98);
        doc.roundedRect(65, 365, 480, 70, 4);
        doc.fill();

        doc.setFillColor(0.3, 0.3, 0.3);
        doc.text(productDesc, {
          x: 75,
          y: 425,
          width: 460,
          height: 60,
          fontSize: 10,
          align: 'justify',
          lineGap: 2,
          ellipsis: '...'
        });

        // Legend
        doc.setFillColor(0.5, 0.5, 0.5);
        doc.text('üí° Tip: Without ellipsis, text would overflow the box. With ellipsis, it fits perfectly!', 50, 320, 10, 'Helvetica-Oblique');

        await doc.save('test-ellipsis.pdf');
        showStatus('‚úÖ Ellipsis feature test completed!');
      } catch (error) {
        showStatus('‚ùå Error: ' + error.message, true);
        console.error(error);
      }
    }

    async function testParagraphGap() {
      try {
        const { PDFDocument } = PDFStudio;
        const doc = new PDFDocument({ title: 'Paragraph Gap Feature Test' });

        doc.text('Paragraph Gap Feature (v0.3.1)', 50, 750, 20, 'Helvetica-Bold');
        doc.text('Add precise spacing after paragraphs for professional typography', 50, 730, 11, 'Helvetica', {
          paragraphGap: 25
        });

        // Example 1: Without paragraph gap
        doc.setFillColor(0.2, 0.2, 0.2);
        doc.text('Example 1: Without Paragraph Gap', 50, doc.getCurrentY(), 14, 'Helvetica-Bold');
        doc.text('(No spacing between paragraphs)', 50, doc.getCurrentY() - 15, 10, 'Helvetica-Oblique');

        const y1 = doc.getCurrentY() - 30;
        doc.setFillColor(0.3, 0.3, 0.3);
        doc.text('First paragraph without gap.', 50, y1, 11);
        doc.text('Second paragraph immediately follows.', 50, y1 - 14, 11);
        doc.text('Third paragraph also too close.', 50, y1 - 28, 11);

        // Example 2: With paragraph gap
        doc.setFillColor(0.2, 0.2, 0.2);
        doc.text('Example 2: With Paragraph Gap (12pt)', 320, 680, 14, 'Helvetica-Bold');
        doc.text('(Professional spacing)', 320, 665, 10, 'Helvetica-Oblique');

        doc.setFillColor(0.3, 0.3, 0.3);
        doc.text('First paragraph with 12pt gap.', {
          x: 320,
          y: 640,
          fontSize: 11,
          paragraphGap: 12
        });

        doc.text('Second paragraph properly spaced.', {
          x: 320,
          y: doc.getCurrentY(),
          fontSize: 11,
          paragraphGap: 12
        });

        doc.text('Third paragraph also well-spaced.', {
          x: 320,
          y: doc.getCurrentY(),
          fontSize: 11,
          paragraphGap: 12
        });

        // Example 3: Document with consistent rhythm
        doc.setFillColor(0.2, 0.2, 0.2);
        doc.text('Example 3: Document with Consistent Rhythm', 50, 540, 14, 'Helvetica-Bold', {
          paragraphGap: 15
        });

        doc.text('Section Heading', {
          x: 50,
          y: doc.getCurrentY(),
          fontSize: 13,
          font: 'Helvetica-Bold',
          paragraphGap: 10
        });

        const para1 = 'This is the first paragraph with proper spacing. It demonstrates how paragraphGap creates visual hierarchy and improves readability.';
        doc.setFillColor(0.3, 0.3, 0.3);
        doc.text(para1, {
          x: 50,
          y: doc.getCurrentY(),
          width: 510,
          fontSize: 11,
          align: 'justify',
          lineGap: 2,
          paragraphGap: 12
        });

        const para2 = 'The second paragraph follows with consistent spacing. Notice how the document feels more professional and easier to read.';
        doc.text(para2, {
          x: 50,
          y: doc.getCurrentY(),
          width: 510,
          fontSize: 11,
          align: 'justify',
          lineGap: 2,
          paragraphGap: 20
        });

        doc.setFillColor(0.2, 0.2, 0.2);
        doc.text('Another Section', {
          x: 50,
          y: doc.getCurrentY(),
          fontSize: 13,
          font: 'Helvetica-Bold',
          paragraphGap: 10
        });

        const para3 = 'This third paragraph shows how larger gaps create clear section breaks while maintaining visual flow.';
        doc.setFillColor(0.3, 0.3, 0.3);
        doc.text(para3, {
          x: 50,
          y: doc.getCurrentY(),
          width: 510,
          fontSize: 11,
          align: 'justify',
          lineGap: 2,
          paragraphGap: 12
        });

        // Common gap values reference
        doc.setFillColor(0.95, 0.95, 0.98);
        doc.roundedRect(50, 220, 510, 80, 8);
        doc.fill();

        doc.setFillColor(0.2, 0.2, 0.2);
        doc.text('üìè Common Paragraph Gap Values', 60, 285, 12, 'Helvetica-Bold');

        doc.setFillColor(0.3, 0.3, 0.3);
        doc.text('‚Ä¢ 6-8pt: Tight spacing (lists, dense content)', 60, 265, 10);
        doc.text('‚Ä¢ 10-12pt: Normal spacing (body paragraphs)', 60, 250, 10);
        doc.text('‚Ä¢ 15-20pt: Section breaks (headings to content)', 60, 235, 10);

        doc.setFillColor(0.5, 0.5, 0.5);
        doc.text('üí° Tip: Use consistent gap values throughout your document for professional results.', 50, 195, 10, 'Helvetica-Oblique');

        await doc.save('test-paragraph-gap.pdf');
        showStatus('‚úÖ Paragraph gap feature test completed!');
      } catch (error) {
        showStatus('‚ùå Error: ' + error.message, true);
        console.error(error);
      }
    }

    async function testEllipsisParagraphGap() {
      try {
        const { PDFDocument } = PDFStudio;
        const doc = new PDFDocument({ title: 'Combined Features Test' });

        doc.text('Ellipsis + Paragraph Gap (v0.3.1)', 50, 750, 20, 'Helvetica-Bold');
        doc.text('Both features working together for professional layouts', 50, 730, 11, 'Helvetica', {
          paragraphGap: 25
        });

        // Newsletter header
        doc.setFillColor(0.15, 0.23, 0.47);
        doc.rect(0, 658, 612, 35);
        doc.fill();

        doc.setFillColor(1, 1, 1);
        doc.text('TECH INSIGHTS', 50, 680, 18, 'Helvetica-Bold');
        doc.text('Weekly Newsletter ‚Ä¢ Issue #247', 50, 664, 9);

        // Article 1
        doc.setFillColor(0.1, 0.1, 0.1);
        doc.text('The Future of Quantum Computing', {
          x: 50,
          y: 630,
          fontSize: 14,
          font: 'Helvetica-Bold',
          paragraphGap: 5
        });

        doc.setFillColor(0.4, 0.4, 0.4);
        doc.text('By Dr. Sarah Chen ‚Ä¢ 8 min read', {
          x: 50,
          y: doc.getCurrentY(),
          fontSize: 9,
          paragraphGap: 8
        });

        const article1 = 'Quantum computing has long promised to revolutionize computing, but error rates have held it back. Recent breakthroughs at MIT and Google have demonstrated new error-correction techniques that could finally make quantum computers practical for real-world applications. The new approach uses topological qubits that are inherently more stable.';

        doc.setFillColor(0.99, 0.99, 1);
        doc.roundedRect(50, doc.getCurrentY() - 50, 510, 50, 4);
        doc.fill();

        doc.setFillColor(0.3, 0.3, 0.3);
        doc.text(article1, {
          x: 58,
          y: doc.getCurrentY() - 8,
          width: 494,
          height: 36,
          fontSize: 10,
          align: 'justify',
          lineGap: 2,
          ellipsis: '...[Read More]',
          paragraphGap: 15
        });

        // Article 2
        doc.setFillColor(0.1, 0.1, 0.1);
        doc.text('AI Ethics Framework Announced', {
          x: 50,
          y: doc.getCurrentY(),
          fontSize: 14,
          font: 'Helvetica-Bold',
          paragraphGap: 5
        });

        doc.setFillColor(0.4, 0.4, 0.4);
        doc.text('By Michael Rodriguez ‚Ä¢ 5 min read', {
          x: 50,
          y: doc.getCurrentY(),
          fontSize: 9,
          paragraphGap: 8
        });

        const article2 = 'A coalition of major tech companies including Microsoft, Google, and OpenAI have jointly proposed a comprehensive framework for ethical AI development and deployment. The framework addresses key concerns around bias, transparency, privacy, and accountability. It includes mandatory third-party audits and transparency requirements.';

        doc.setFillColor(0.99, 0.99, 1);
        doc.roundedRect(50, doc.getCurrentY() - 50, 510, 50, 4);
        doc.fill();

        doc.setFillColor(0.3, 0.3, 0.3);
        doc.text(article2, {
          x: 58,
          y: doc.getCurrentY() - 8,
          width: 494,
          height: 36,
          fontSize: 10,
          align: 'justify',
          lineGap: 2,
          ellipsis: '...[Read More]',
          paragraphGap: 15
        });

        // Article 3
        doc.setFillColor(0.1, 0.1, 0.1);
        doc.text('Green Data Centers Leading Change', {
          x: 50,
          y: doc.getCurrentY(),
          fontSize: 14,
          font: 'Helvetica-Bold',
          paragraphGap: 5
        });

        doc.setFillColor(0.4, 0.4, 0.4);
        doc.text('By Emma Watson ‚Ä¢ 6 min read', {
          x: 50,
          y: doc.getCurrentY(),
          fontSize: 9,
          paragraphGap: 8
        });

        const article3 = 'Data centers consume approximately 1% of global electricity, but tech companies are making dramatic strides in sustainability. Amazon, Microsoft, and Google have all committed to carbon-neutral data centers by 2030, and they are ahead of schedule. Innovations include AI-optimized cooling systems and renewable energy contracts.';

        doc.setFillColor(0.99, 0.99, 1);
        doc.roundedRect(50, doc.getCurrentY() - 50, 510, 50, 4);
        doc.fill();

        doc.setFillColor(0.3, 0.3, 0.3);
        doc.text(article3, {
          x: 58,
          y: doc.getCurrentY() - 8,
          width: 494,
          height: 36,
          fontSize: 10,
          align: 'justify',
          lineGap: 2,
          ellipsis: '...[Read More]',
          paragraphGap: 15
        });

        // Footer
        doc.setFillColor(0.5, 0.5, 0.5);
        doc.text('üí° Each article preview uses ellipsis for truncation + paragraphGap for spacing', 50, 180, 10, 'Helvetica-Oblique');
        doc.text('This creates a professional newsletter layout that fits perfectly on the page.', 50, 165, 10, 'Helvetica-Oblique');

        await doc.save('test-ellipsis-paragraph-gap-combined.pdf');
        showStatus('‚úÖ Combined features test completed!');
      } catch (error) {
        showStatus('‚ùå Error: ' + error.message, true);
        console.error(error);
      }
    }

    // ========== SHAPES ==========

    async function testRectangles() {
      try {
        const { PDFDocument } = PDFStudio;
        const doc = new PDFDocument({ title: 'Rectangles Test' });

        doc.text('Rectangle Test', 50, 750, 20, 'Helvetica-Bold');

        // Filled rectangles
        doc.setFillColor(1, 0, 0);
        doc.rect(50, 650, 100, 60);
        doc.fill();

        doc.setFillColor(0, 1, 0);
        doc.rect(170, 650, 100, 60);
        doc.fill();

        doc.setFillColor(0, 0, 1);
        doc.rect(290, 650, 100, 60);
        doc.fill();

        // Stroked rectangles
        doc.setStrokeColor(1, 0, 0);
        doc.setLineWidth(2);
        doc.rect(50, 550, 100, 60);
        doc.stroke();

        doc.setStrokeColor(0, 1, 0);
        doc.setLineWidth(4);
        doc.rect(170, 550, 100, 60);
        doc.stroke();

        doc.setStrokeColor(0, 0, 1);
        doc.setLineWidth(6);
        doc.rect(290, 550, 100, 60);
        doc.stroke();

        // Filled and stroked
        doc.setFillColor(1, 1, 0);
        doc.setStrokeColor(0, 0, 0);
        doc.setLineWidth(3);
        doc.rect(50, 450, 100, 60);
        doc.fillAndStroke();

        doc.setFillColor(1, 0, 1);
        doc.rect(170, 450, 100, 60);
        doc.fillAndStroke();

        doc.setFillColor(0, 1, 1);
        doc.rect(290, 450, 100, 60);
        doc.fillAndStroke();

        await doc.save('test-rectangles.pdf');
        showStatus('‚úÖ Rectangle test completed!');
      } catch (error) {
        showStatus('‚ùå Error: ' + error.message, true);
        console.error(error);
      }
    }

    async function testCircles() {
      try {
        const { PDFDocument } = PDFStudio;
        const doc = new PDFDocument({ title: 'Circles Test' });

        doc.text('Circle Test', 50, 750, 20, 'Helvetica-Bold');

        // Filled circles
        doc.setFillColor(1, 0, 0);
        doc.circle({ x: 100, y: 650, radius: 40 });
        doc.fill();

        doc.setFillColor(0, 1, 0);
        doc.circle({ x: 220, y: 650, radius: 40 });
        doc.fill();

        doc.setFillColor(0, 0, 1);
        doc.circle({ x: 340, y: 650, radius: 40 });
        doc.fill();

        // Stroked circles
        doc.setStrokeColor(1, 0, 0);
        doc.setLineWidth(2);
        doc.circle({ x: 100, y: 520, radius: 40 });
        doc.stroke();

        doc.setStrokeColor(0, 1, 0);
        doc.setLineWidth(4);
        doc.circle({ x: 220, y: 520, radius: 40 });
        doc.stroke();

        doc.setStrokeColor(0, 0, 1);
        doc.setLineWidth(6);
        doc.circle({ x: 340, y: 520, radius: 40 });
        doc.stroke();

        // Different sizes
        const sizes = [20, 30, 40, 50];
        let x = 100;
        doc.setFillColor(0.4, 0.2, 0.8);
        sizes.forEach(size => {
          doc.circle({ x: x, y: 380, radius: size });
          doc.fill();
          x += (size * 2 + 20);
        });

        await doc.save('test-circles.pdf');
        showStatus('‚úÖ Circle test completed!');
      } catch (error) {
        showStatus('‚ùå Error: ' + error.message, true);
        console.error(error);
      }
    }

    async function testLines() {
      try {
        const { PDFDocument } = PDFStudio;
        const doc = new PDFDocument({ title: 'Lines Test' });

        doc.text('Line Test', 50, 750, 20, 'Helvetica-Bold');

        // Different widths
        const widths = [1, 2, 4, 6, 8, 10];
        let y = 700;
        widths.forEach(width => {
          doc.setLineWidth(width);
          doc.setStrokeColor(0, 0, 0);
          doc.moveTo(50, y);
          doc.lineTo(500, y);
          doc.stroke();
          doc.setFillColor(0, 0, 0);
          doc.text(`Width: ${width}`, 510, y - 5, 10);
          y -= 30;
        });

        // Different colors
        const colors = [
          { r: 1, g: 0, b: 0 },
          { r: 0, g: 1, b: 0 },
          { r: 0, g: 0, b: 1 },
          { r: 1, g: 1, b: 0 },
          { r: 1, g: 0, b: 1 }
        ];
        y = 450;
        doc.setLineWidth(4);
        colors.forEach(color => {
          doc.setStrokeColor(color.r, color.g, color.b);
          doc.moveTo(50, y);
          doc.lineTo(500, y);
          doc.stroke();
          y -= 25;
        });

        // Diagonal lines
        doc.setStrokeColor(0, 0, 0);
        doc.setLineWidth(2);
        doc.moveTo(50, 250);
        doc.lineTo(200, 150);
        doc.stroke();
        doc.moveTo(250, 250);
        doc.lineTo(250, 150);
        doc.stroke();
        doc.moveTo(300, 250);
        doc.lineTo(450, 150);
        doc.stroke();

        await doc.save('test-lines.pdf');
        showStatus('‚úÖ Line test completed!');
      } catch (error) {
        showStatus('‚ùå Error: ' + error.message, true);
        console.error(error);
      }
    }

    async function testPolygons() {
      try {
        const { PDFDocument } = PDFStudio;
        const doc = new PDFDocument({ title: 'Polygons Test' });

        doc.text('Polygon Test', 50, 750, 20, 'Helvetica-Bold');
        doc.text('Regular polygons using polygon() method', 50, 730, 10);

        // Regular Triangle (3 sides)
        doc.setFillColor(1, 0, 0);
        doc.polygon({ x: 100, y: 650, radius: 40, sides: 3 });
        doc.fill();
        doc.setFillColor(0, 0, 0);
        doc.text('Triangle', 75, 580, 10);

        // Regular Pentagon (5 sides)
        doc.setFillColor(0, 1, 0);
        doc.polygon({ x: 250, y: 650, radius: 40, sides: 5 });
        doc.fill();
        doc.setFillColor(0, 0, 0);
        doc.text('Pentagon', 220, 580, 10);

        // Regular Hexagon (6 sides)
        doc.setFillColor(0, 0, 1);
        doc.polygon({ x: 400, y: 650, radius: 40, sides: 6 });
        doc.fill();
        doc.setFillColor(0, 0, 0);
        doc.text('Hexagon', 375, 580, 10);

        // Custom shape using path commands
        doc.text('Custom shapes using moveTo/lineTo', 50, 540, 10);

        // Custom Star (5-pointed)
        doc.setFillColor(1, 1, 0);
        doc.setStrokeColor(0, 0, 0);
        doc.setLineWidth(2);

        const starPoints = [
          { x: 100, y: 420 },
          { x: 110, y: 450 },
          { x: 140, y: 450 },
          { x: 115, y: 470 },
          { x: 125, y: 500 },
          { x: 100, y: 480 },
          { x: 75, y: 500 },
          { x: 85, y: 470 },
          { x: 60, y: 450 },
          { x: 90, y: 450 }
        ];

        doc.moveTo(starPoints[0].x, starPoints[0].y);
        for (let i = 1; i < starPoints.length; i++) {
          doc.lineTo(starPoints[i].x, starPoints[i].y);
        }
        doc.closePath();
        doc.fillAndStroke();

        doc.setFillColor(0, 0, 0);
        doc.text('Star', 85, 360, 10);

        // Custom Arrow
        doc.setFillColor(1, 0, 1);
        doc.moveTo(250, 450);
        doc.lineTo(350, 450);
        doc.lineTo(350, 430);
        doc.lineTo(380, 460);
        doc.lineTo(350, 490);
        doc.lineTo(350, 470);
        doc.lineTo(250, 470);
        doc.closePath();
        doc.fill();

        doc.setFillColor(0, 0, 0);
        doc.text('Arrow', 295, 360, 10);

        // Octagon (8 sides)
        doc.setFillColor(0, 1, 1);
        doc.polygon({ x: 100, y: 250, radius: 40, sides: 8 });
        doc.fill();
        doc.setFillColor(0, 0, 0);
        doc.text('Octagon', 75, 180, 10);

        await doc.save('test-polygons.pdf');
        showStatus('‚úÖ Polygon test completed!');
      } catch (error) {
        showStatus('‚ùå Error: ' + error.message, true);
        console.error(error);
      }
    }

    async function testPaths() {
      try {
        const { PDFDocument } = PDFStudio;
        const doc = new PDFDocument({ title: 'Paths Test' });

        doc.text('Custom Path Test', 50, 750, 20, 'Helvetica-Bold');

        // Curved path
        doc.setStrokeColor(1, 0, 0);
        doc.setLineWidth(3);
        doc.moveTo(50, 700);
        doc.lineTo(150, 700);
        doc.bezierCurveTo(200, 700, 200, 650, 150, 650);
        doc.lineTo(50, 650);
        doc.stroke();

        // Complex path
        doc.setFillColor(0, 0, 1);
        doc.moveTo(300, 700);
        doc.lineTo(400, 700);
        doc.lineTo(400, 650);
        doc.lineTo(350, 620);
        doc.lineTo(300, 650);
        doc.closePath();
        doc.fill();

        await doc.save('test-paths.pdf');
        showStatus('‚úÖ Path test completed!');
      } catch (error) {
        showStatus('‚ùå Error: ' + error.message, true);
        console.error(error);
      }
    }

    // ========== COLORS ==========

    async function testFillColors() {
      try {
        const { PDFDocument } = PDFStudio;
        const doc = new PDFDocument({ title: 'Fill Colors Test' });

        doc.text('Fill Color Test (RGB)', 50, 750, 20, 'Helvetica-Bold');

        const colors = [
          { r: 1, g: 0, b: 0, name: 'Red (1,0,0)' },
          { r: 0, g: 1, b: 0, name: 'Green (0,1,0)' },
          { r: 0, g: 0, b: 1, name: 'Blue (0,0,1)' },
          { r: 1, g: 1, b: 0, name: 'Yellow (1,1,0)' },
          { r: 1, g: 0, b: 1, name: 'Magenta (1,0,1)' },
          { r: 0, g: 1, b: 1, name: 'Cyan (0,1,1)' },
          { r: 0.5, g: 0, b: 0.5, name: 'Purple (0.5,0,0.5)' },
          { r: 1, g: 0.5, b: 0, name: 'Orange (1,0.5,0)' },
          { r: 0.2, g: 0.6, b: 0.2, name: 'Forest Green (0.2,0.6,0.2)' },
          { r: 0.4, g: 0.2, b: 0.8, name: 'Indigo (0.4,0.2,0.8)' }
        ];

        let y = 700;
        colors.forEach(color => {
          doc.setFillColor(color.r, color.g, color.b);
          doc.rect(50, y - 20, 150, 25);
          doc.fill();

          doc.setFillColor(0, 0, 0);
          doc.text(color.name, 220, y - 5, 12);
          y -= 35;
        });

        await doc.save('test-fill-colors.pdf');
        showStatus('‚úÖ Fill color test completed!');
      } catch (error) {
        showStatus('‚ùå Error: ' + error.message, true);
        console.error(error);
      }
    }

    async function testStrokeColors() {
      try {
        const { PDFDocument } = PDFStudio;
        const doc = new PDFDocument({ title: 'Stroke Colors Test' });

        doc.text('Stroke Color Test', 50, 750, 20, 'Helvetica-Bold');

        const colors = [
          { r: 1, g: 0, b: 0, name: 'Red' },
          { r: 0, g: 1, b: 0, name: 'Green' },
          { r: 0, g: 0, b: 1, name: 'Blue' },
          { r: 1, g: 1, b: 0, name: 'Yellow' },
          { r: 1, g: 0, b: 1, name: 'Magenta' },
          { r: 0, g: 1, b: 1, name: 'Cyan' }
        ];

        let y = 700;
        doc.setLineWidth(5);
        colors.forEach(color => {
          doc.setStrokeColor(color.r, color.g, color.b);
          doc.rect(50, y - 20, 150, 25);
          doc.stroke();

          doc.setFillColor(0, 0, 0);
          doc.text(color.name, 220, y - 5, 12);
          y -= 40;
        });

        await doc.save('test-stroke-colors.pdf');
        showStatus('‚úÖ Stroke color test completed!');
      } catch (error) {
        showStatus('‚ùå Error: ' + error.message, true);
        console.error(error);
      }
    }

    async function testLineWidths() {
      try {
        const { PDFDocument } = PDFStudio;
        const doc = new PDFDocument({ title: 'Line Widths Test' });

        doc.text('Line Width Test', 50, 750, 20, 'Helvetica-Bold');

        const widths = [0.5, 1, 2, 3, 4, 5, 6, 8, 10, 12, 15, 20];

        let y = 700;
        doc.setStrokeColor(0, 0, 0);
        widths.forEach(width => {
          doc.setLineWidth(width);
          doc.moveTo(50, y);
          doc.lineTo(400, y);
          doc.stroke();

          doc.setFillColor(0, 0, 0);
          doc.text(`${width}pt`, 420, y - 5, 10);
          y -= (width + 15);
        });

        await doc.save('test-line-widths.pdf');
        showStatus('‚úÖ Line width test completed!');
      } catch (error) {
        showStatus('‚ùå Error: ' + error.message, true);
        console.error(error);
      }
    }

    async function testOpacity() {
      try {
        const { PDFDocument } = PDFStudio;
        const doc = new PDFDocument({ title: 'Opacity Test' });

        doc.text('Opacity/Transparency Test', 50, 750, 20, 'Helvetica-Bold');

        // Overlapping circles with different opacities
        doc.setFillColor(1, 0, 0);
        doc.circle({ x: 150, y: 600, radius: 50 });
        doc.fill();

        doc.setFillColor(0, 1, 0);
        doc.circle({ x: 200, y: 600, radius: 50 });
        doc.fill();

        doc.setFillColor(0, 0, 1);
        doc.circle({ x: 175, y: 650, radius: 50 });
        doc.fill();

        doc.text('Overlapping shapes show transparency', 100, 530, 12);

        await doc.save('test-opacity.pdf');
        showStatus('‚úÖ Opacity test completed!');
      } catch (error) {
        showStatus('‚ùå Error: ' + error.message, true);
        console.error(error);
      }
    }

    // ========== IMAGES ==========

    async function testImageBasic() {
      try {
        const { PDFDocument } = PDFStudio;
        const doc = new PDFDocument({ title: 'Image Basic Test' });

        const imageBuffer = await createDemoImage(200, 150, 'Demo Image');

        doc.text('Basic Image Test', 50, 750, 20, 'Helvetica-Bold');
        doc.text('Image embedded in PDF:', 50, 720, 12);

        await doc.image(imageBuffer, 50, 500, { width: 200, height: 150 });

        doc.text('Image dimensions: 200x150', 50, 470, 10);

        await doc.save('test-image-basic.pdf');
        showStatus('‚úÖ Basic image test completed!');
      } catch (error) {
        showStatus('‚ùå Error: ' + error.message, true);
        console.error(error);
      }
    }

    async function testImageSizes() {
      try {
        const { PDFDocument } = PDFStudio;
        const doc = new PDFDocument({ title: 'Image Sizes Test' });

        doc.text('Image Scaling Test', 50, 750, 20, 'Helvetica-Bold');

        const imageBuffer = await createDemoImage(200, 150, 'Scaled');

        // Original size
        await doc.image(imageBuffer, 50, 550, { width: 100, height: 75 });
        doc.text('100x75', 50, 520, 10);

        // Medium
        await doc.image(imageBuffer, 180, 550, { width: 150, height: 112 });
        doc.text('150x112', 180, 520, 10);

        // Large
        await doc.image(imageBuffer, 50, 350, { width: 200, height: 150 });
        doc.text('200x150', 50, 320, 10);

        await doc.save('test-image-sizes.pdf');
        showStatus('‚úÖ Image size test completed!');
      } catch (error) {
        showStatus('‚ùå Error: ' + error.message, true);
        console.error(error);
      }
    }

    async function testImagePositions() {
      try {
        const { PDFDocument } = PDFStudio;
        const doc = new PDFDocument({ title: 'Image Positions Test' });

        doc.text('Image Positioning Test', 50, 750, 20, 'Helvetica-Bold');

        const imageBuffer = await createDemoImage(150, 100, 'Positioned');

        // Top-left
        await doc.image(imageBuffer, 50, 600, { width: 100, height: 67 });
        doc.text('Top-left', 50, 580, 10);

        // Top-right
        await doc.image(imageBuffer, 400, 600, { width: 100, height: 67 });
        doc.text('Top-right', 400, 580, 10);

        // Center
        await doc.image(imageBuffer, 225, 450, { width: 100, height: 67 });
        doc.text('Center', 225, 430, 10);

        // Bottom-left
        await doc.image(imageBuffer, 50, 300, { width: 100, height: 67 });
        doc.text('Bottom-left', 50, 280, 10);

        // Bottom-right
        await doc.image(imageBuffer, 400, 300, { width: 100, height: 67 });
        doc.text('Bottom-right', 400, 280, 10);

        await doc.save('test-image-positions.pdf');
        showStatus('‚úÖ Image position test completed!');
      } catch (error) {
        showStatus('‚ùå Error: ' + error.message, true);
        console.error(error);
      }
    }

    async function testMultipleImages() {
      try {
        const { PDFDocument } = PDFStudio;
        const doc = new PDFDocument({ title: 'Multiple Images Test' });

        doc.text('Multiple Images Test', 50, 750, 20, 'Helvetica-Bold');

        const images = [];
        for (let i = 1; i <= 6; i++) {
          images.push(await createDemoImage(150, 100, `Image ${i}`));
        }

        let x = 50;
        let y = 650;
        let col = 0;

        for (const img of images) {
          await doc.image(img, x, y, { width: 120, height: 80 });
          x += 140;
          col++;
          if (col === 3) {
            col = 0;
            x = 50;
            y -= 100;
          }
        }

        await doc.save('test-multiple-images.pdf');
        showStatus('‚úÖ Multiple images test completed!');
      } catch (error) {
        showStatus('‚ùå Error: ' + error.message, true);
        console.error(error);
      }
    }

    // ========== TABLES ==========

    async function testTableBasic() {
      try {
        const { PDFDocument } = PDFStudio;
        const doc = new PDFDocument({ title: 'Table Basic Test' });

        doc.text('Basic Table Test', 50, 750, 20, 'Helvetica-Bold');

        doc.table({
          headers: ['Name', 'Age', 'City'],
          rows: [
            ['John Doe', '30', 'New York'],
            ['Jane Smith', '25', 'Los Angeles'],
            ['Bob Johnson', '35', 'Chicago']
          ],
          x: 50,
          y: 600,
          width: 400
        });

        await doc.save('test-table-basic.pdf');
        showStatus('‚úÖ Basic table test completed!');
      } catch (error) {
        showStatus('‚ùå Error: ' + error.message, true);
        console.error(error);
      }
    }

    async function testTableStyled() {
      try {
        const { PDFDocument } = PDFStudio;
        const doc = new PDFDocument({ title: 'Table Styled Test' });

        doc.text('Styled Table Test', 50, 750, 20, 'Helvetica-Bold');

        doc.table({
          headers: ['Product', 'Price', 'Stock', 'Status'],
          rows: [
            ['Laptop', '$999', '15', 'Available'],
            ['Mouse', '$29', '150', 'Available'],
            ['Keyboard', '$79', '75', 'Available'],
            ['Monitor', '$299', '30', 'Available']
          ],
          x: 50,
          y: 600,
          width: 500,
          headerBackgroundColor: { r: 0.4, g: 0.2, b: 0.8 },
          headerTextColor: { r: 1, g: 1, b: 1 }
        });

        await doc.save('test-table-styled.pdf');
        showStatus('‚úÖ Styled table test completed!');
      } catch (error) {
        showStatus('‚ùå Error: ' + error.message, true);
        console.error(error);
      }
    }

    async function testTableComplex() {
      try {
        const { PDFDocument } = PDFStudio;
        const doc = new PDFDocument({ title: 'Table Complex Test' });

        doc.text('Complex Table Test', 50, 750, 20, 'Helvetica-Bold');

        doc.table({
          headers: ['ID', 'Item', 'Description', 'Qty', 'Price', 'Total'],
          rows: [
            ['001', 'Widget A', 'High quality widget', '5', '$10.00', '$50.00'],
            ['002', 'Widget B', 'Premium widget', '3', '$15.00', '$45.00'],
            ['003', 'Gadget X', 'Advanced gadget', '2', '$25.00', '$50.00'],
            ['004', 'Tool Y', 'Professional tool', '1', '$100.00', '$100.00'],
            ['005', 'Part Z', 'Replacement part', '10', '$5.00', '$50.00']
          ],
          x: 30,
          y: 580,
          width: 550
        });

        doc.setFillColor(0, 0, 0);
        doc.text('Total: $295.00', 450, 390, 14, 'Helvetica-Bold');

        await doc.save('test-table-complex.pdf');
        showStatus('‚úÖ Complex table test completed!');
      } catch (error) {
        showStatus('‚ùå Error: ' + error.message, true);
        console.error(error);
      }
    }

    async function testTableLarge() {
      try {
        const { PDFDocument } = PDFStudio;
        const doc = new PDFDocument({ title: 'Table Large Test' });

        doc.text('Large Table Test', 50, 750, 20, 'Helvetica-Bold');

        const rows = [];
        for (let i = 1; i <= 25; i++) {
          rows.push([
            `${i}`,
            `Item ${i}`,
            `$${(i * 10).toFixed(2)}`,
            i % 2 === 0 ? 'Active' : 'Inactive'
          ]);
        }

        doc.table({
          headers: ['#', 'Name', 'Value', 'Status'],
          rows: rows,
          x: 50,
          y: 50,
          width: 400,
          autoPageBreak: true,
          repeatHeader: true,
          bottomMargin: 50
        });

        await doc.save('test-table-large.pdf');
        showStatus('‚úÖ Large table test completed (may span multiple pages)!');
      } catch (error) {
        showStatus('‚ùå Error: ' + error.message, true);
        console.error(error);
      }
    }

    // ========== CHARTS ==========

    async function testBarChart() {
      try {
        const { PDFDocument } = PDFStudio;
        const doc = new PDFDocument({ title: 'Bar Chart Test' });

        doc.text('Bar Chart Test', 50, 750, 20, 'Helvetica-Bold');

        doc.barChart({
          data: [
            { label: 'Jan', value: 45000 },
            { label: 'Feb', value: 52000 },
            { label: 'Mar', value: 48000 },
            { label: 'Apr', value: 61000 },
            { label: 'May', value: 58000 },
            { label: 'Jun', value: 67000 }
          ],
          x: 80,
          y: 400,
          width: 450,
          height: 300,
          title: 'Monthly Revenue',
          colors: ['#667eea', '#764ba2', '#f093fb', '#4facfe', '#43e97b', '#fa709a']
        });

        await doc.save('test-chart-bar.pdf');
        showStatus('‚úÖ Bar chart test completed!');
      } catch (error) {
        showStatus('‚ùå Error: ' + error.message, true);
        console.error(error);
      }
    }

    async function testLineChart() {
      try {
        const { PDFDocument } = PDFStudio;
        const doc = new PDFDocument({ title: 'Line Chart Test' });

        doc.text('Line Chart Test', 50, 750, 20, 'Helvetica-Bold');

        doc.lineChart({
          data: [
            { label: 'Week 1', value: 120 },
            { label: 'Week 2', value: 150 },
            { label: 'Week 3', value: 130 },
            { label: 'Week 4', value: 180 },
            { label: 'Week 5', value: 160 },
            { label: 'Week 6', value: 200 }
          ],
          x: 80,
          y: 400,
          width: 450,
          height: 300,
          title: 'Weekly Sales Trend',
          color: '#667eea'
        });

        await doc.save('test-chart-line.pdf');
        showStatus('‚úÖ Line chart test completed!');
      } catch (error) {
        showStatus('‚ùå Error: ' + error.message, true);
        console.error(error);
      }
    }

    async function testPieChart() {
      try {
        const { PDFDocument } = PDFStudio;
        const doc = new PDFDocument({ title: 'Pie Chart Test' });

        doc.text('Pie Chart Test', 50, 750, 20, 'Helvetica-Bold');

        doc.pieChart({
          data: [
            { label: 'Product A', value: 35 },
            { label: 'Product B', value: 25 },
            { label: 'Product C', value: 20 },
            { label: 'Product D', value: 15 },
            { label: 'Other', value: 5 }
          ],
          x: 250,
          y: 500,
          radius: 120,
          title: 'Market Share',
          colors: ['#667eea', '#764ba2', '#f093fb', '#4facfe', '#43e97b']
        });

        await doc.save('test-chart-pie.pdf');
        showStatus('‚úÖ Pie chart test completed!');
      } catch (error) {
        showStatus('‚ùå Error: ' + error.message, true);
        console.error(error);
      }
    }

    async function testMultipleCharts() {
      try {
        const { PDFDocument } = PDFStudio;
        const doc = new PDFDocument({ title: 'Multiple Charts Test' });

        doc.text('Multiple Charts Dashboard', 50, 750, 20, 'Helvetica-Bold');

        // Bar chart
        doc.barChart({
          data: [
            { label: 'Q1', value: 150 },
            { label: 'Q2', value: 200 },
            { label: 'Q3', value: 180 },
            { label: 'Q4', value: 220 }
          ],
          x: 50,
          y: 400,
          width: 220,
          height: 150,
          title: 'Quarterly Sales',
          colors: ['#667eea', '#764ba2', '#f093fb', '#4facfe']
        });

        // Line chart
        doc.lineChart({
          data: [
            { label: 'Jan', value: 50 },
            { label: 'Feb', value: 65 },
            { label: 'Mar', value: 55 },
            { label: 'Apr', value: 75 },
            { label: 'May', value: 70 },
            { label: 'Jun', value: 85 }
          ],
          x: 310,
          y: 400,
          width: 220,
          height: 150,
          title: 'Growth Trend',
          color: '#43e97b'
        });

        // Pie chart
        doc.pieChart({
          data: [
            { label: 'A', value: 40 },
            { label: 'B', value: 30 },
            { label: 'C', value: 20 },
            { label: 'D', value: 10 }
          ],
          x: 150,
          y: 180,
          radius: 80,
          title: 'Distribution',
          colors: ['#667eea', '#764ba2', '#f093fb', '#4facfe']
        });

        await doc.save('test-charts-multiple.pdf');
        showStatus('‚úÖ Multiple charts test completed!');
      } catch (error) {
        showStatus('‚ùå Error: ' + error.message, true);
        console.error(error);
      }
    }

    // ========== QR CODES ==========

    async function testQRURL() {
      try {
        const { PDFDocument } = PDFStudio;
        const doc = new PDFDocument({ title: 'QR URL Test' });

        doc.text('QR Code - URL Test', 50, 750, 20, 'Helvetica-Bold');
        doc.text('Scan to visit GitHub:', 50, 720, 12);

        await doc.qrCode({
          data: 'https://github.com/pdfstudio-dev/pdfstudio',
          x: 200,
          y: 500,
          size: 150
        });

        doc.text('https://github.com/pdfstudio-dev/pdfstudio', 100, 420, 10);

        await doc.save('test-qr-url.pdf');
        showStatus('‚úÖ QR URL test completed!');
      } catch (error) {
        showStatus('‚ùå Error: ' + error.message, true);
        console.error(error);
      }
    }

    async function testQRText() {
      try {
        const { PDFDocument } = PDFStudio;
        const doc = new PDFDocument({ title: 'QR Text Test' });

        doc.text('QR Code - Text Test', 50, 750, 20, 'Helvetica-Bold');
        doc.text('Scan to read message:', 50, 720, 12);

        await doc.qrCode({
          data: { text: 'Hello from PDFStudio! This is a text QR code generated in the browser.' },
          x: 200,
          y: 500,
          size: 150
        });

        doc.text('Contains: "Hello from PDFStudio!..."', 150, 420, 10);

        await doc.save('test-qr-text.pdf');
        showStatus('‚úÖ QR text test completed!');
      } catch (error) {
        showStatus('‚ùå Error: ' + error.message, true);
        console.error(error);
      }
    }

    async function testQREmail() {
      try {
        const { PDFDocument } = PDFStudio;
        const doc = new PDFDocument({ title: 'QR Email Test' });

        doc.text('QR Code - Email Test', 50, 750, 20, 'Helvetica-Bold');
        doc.text('Scan to send email:', 50, 720, 12);

        await doc.qrCode({
          data: {
            email: {
              address: 'pdfstudio@ideas2code.dev',
              subject: 'Hello from PDFStudio',
              body: 'I generated this QR code in my browser!'
            }
          },
          x: 200,
          y: 500,
          size: 150
        });

        doc.text('Email: pdfstudio@ideas2code.dev', 180, 420, 10);

        await doc.save('test-qr-email.pdf');
        showStatus('‚úÖ QR email test completed!');
      } catch (error) {
        showStatus('‚ùå Error: ' + error.message, true);
        console.error(error);
      }
    }

    async function testQRPhone() {
      try {
        const { PDFDocument } = PDFStudio;
        const doc = new PDFDocument({ title: 'QR Phone Test' });

        doc.text('QR Code - Phone Test', 50, 750, 20, 'Helvetica-Bold');
        doc.text('Scan to call:', 50, 720, 12);

        await doc.qrCode({
          data: { phone: '+1-555-123-4567' },
          x: 200,
          y: 500,
          size: 150
        });

        doc.text('Phone: +1-555-123-4567', 200, 420, 10);

        await doc.save('test-qr-phone.pdf');
        showStatus('‚úÖ QR phone test completed!');
      } catch (error) {
        showStatus('‚ùå Error: ' + error.message, true);
        console.error(error);
      }
    }

    async function testQRWiFi() {
      try {
        const { PDFDocument } = PDFStudio;
        const doc = new PDFDocument({ title: 'QR WiFi Test' });

        doc.text('QR Code - WiFi Test', 50, 750, 20, 'Helvetica-Bold');
        doc.text('Scan to connect to WiFi:', 50, 720, 12);

        await doc.qrCode({
          data: {
            wifi: {
              ssid: 'PDFStudio-Network',
              password: 'secure-password-123',
              encryption: 'WPA'
            }
          },
          x: 200,
          y: 500,
          size: 150
        });

        doc.text('Network: PDFStudio-Network', 180, 420, 10);
        doc.text('Password: secure-password-123', 180, 400, 10);

        await doc.save('test-qr-wifi.pdf');
        showStatus('‚úÖ QR WiFi test completed!');
      } catch (error) {
        showStatus('‚ùå Error: ' + error.message, true);
        console.error(error);
      }
    }

    async function testQRVCard() {
      try {
        const { PDFDocument } = PDFStudio;
        const doc = new PDFDocument({ title: 'QR vCard Test' });

        doc.text('QR Code - vCard Test', 50, 750, 20, 'Helvetica-Bold');
        doc.text('Scan to save contact:', 50, 720, 12);

        await doc.qrCode({
          data: {
            vcard: {
              firstName: 'John',
              lastName: 'Doe',
              organization: 'PDFStudio Inc',
              title: 'Software Engineer',
              phone: '+1-555-987-6543',
              email: 'john.doe@pdfstudio.dev',
              url: 'https://pdfstudio.dev'
            }
          },
          x: 200,
          y: 500,
          size: 150
        });

        doc.text('Contact: John Doe', 200, 420, 10);
        doc.text('PDFStudio Inc - Software Engineer', 150, 400, 10);

        await doc.save('test-qr-vcard.pdf');
        showStatus('‚úÖ QR vCard test completed!');
      } catch (error) {
        showStatus('‚ùå Error: ' + error.message, true);
        console.error(error);
      }
    }

    // ========== WATERMARKS ==========

    async function testWatermarkText() {
      try {
        const { PDFDocument } = PDFStudio;
        const doc = new PDFDocument({ title: 'Text Watermark Test' });

        doc.text('Text Watermark Test', 50, 750, 20, 'Helvetica-Bold');
        doc.text('This page has a text watermark', 50, 720, 12);

        doc.rect(100, 500, 400, 200);
        doc.setFillColor(0.9, 0.95, 1);
        doc.fill();

        doc.setFillColor(0, 0, 0);
        doc.text('Document content goes here', 150, 600, 14);

        doc.addWatermark({
          type: 'text',
          text: 'CONFIDENTIAL',
          opacity: 0.3,
          fontSize: 72,
          color: [1, 0, 0],  // Red
          rotation: 45
        });

        await doc.save('test-watermark-text.pdf');
        showStatus('‚úÖ Text watermark test completed!');
      } catch (error) {
        showStatus('‚ùå Error: ' + error.message, true);
        console.error(error);
      }
    }

    async function testWatermarkImage() {
      try {
        const { PDFDocument } = PDFStudio;
        const doc = new PDFDocument({ title: 'Image Watermark Test' });

        doc.text('Image Watermark Test', 50, 750, 20, 'Helvetica-Bold');
        doc.text('This page has an image watermark', 50, 720, 12);

        const imageBuffer = await createDemoImage(200, 150, 'WATERMARK');

        doc.rect(100, 400, 400, 300);
        doc.setFillColor(0.95, 0.95, 0.95);
        doc.fill();

        doc.setFillColor(0, 0, 0);
        doc.text('Document content', 250, 600, 14);

        doc.addWatermark({
          type: 'image',
          source: imageBuffer,
          opacity: 0.2,
          width: 300,
          height: 225
        });

        await doc.save('test-watermark-image.pdf');
        showStatus('‚úÖ Image watermark test completed!');
      } catch (error) {
        showStatus('‚ùå Error: ' + error.message, true);
        console.error(error);
      }
    }

    async function testWatermarkRotated() {
      try {
        const { PDFDocument } = PDFStudio;
        const doc = new PDFDocument({ title: 'Rotated Watermark Test' });

        doc.text('Rotated Watermark Test', 50, 750, 20, 'Helvetica-Bold');

        doc.addWatermark({
          type: 'text',
          text: 'DRAFT',
          opacity: 0.25,
          fontSize: 100,
          color: [0, 0, 1],  // Blue
          rotation: 45
        });

        doc.text('The watermark is rotated 45 degrees', 50, 400, 14);

        await doc.save('test-watermark-rotated.pdf');
        showStatus('‚úÖ Rotated watermark test completed!');
      } catch (error) {
        showStatus('‚ùå Error: ' + error.message, true);
        console.error(error);
      }
    }

    async function testWatermarkTransparent() {
      try {
        const { PDFDocument } = PDFStudio;
        const doc = new PDFDocument({ title: 'Transparent Watermark Test' });

        doc.text('Transparent Watermark Test', 50, 750, 20, 'Helvetica-Bold');

        doc.addWatermark({
          type: 'text',
          text: 'SAMPLE',
          opacity: 0.15,
          fontSize: 80,
          color: [0, 0, 0],  // Black
          rotation: 0
        });

        doc.text('Very transparent watermark (opacity: 0.15)', 50, 400, 14);

        await doc.save('test-watermark-transparent.pdf');
        showStatus('‚úÖ Transparent watermark test completed!');
      } catch (error) {
        showStatus('‚ùå Error: ' + error.message, true);
        console.error(error);
      }
    }

    // ========== MULTI-PAGE ==========

    async function testMultiplePagesBasic() {
      try {
        const { PDFDocument } = PDFStudio;
        const doc = new PDFDocument({ title: 'Multiple Pages Test' });

        // Page 1
        doc.text('Multiple Pages Test', 50, 750, 24, 'Helvetica-Bold');
        doc.text('This is page 1 of 3', 50, 720, 14);
        doc.rect(50, 500, 500, 200);
        doc.setFillColor(1, 0.9, 0.9);
        doc.fill();
        doc.setFillColor(0, 0, 0);
        doc.text('Page 1 Content', 250, 600, 16);

        // Page 2
        doc.addPage();
        doc.text('Page 2', 50, 750, 24, 'Helvetica-Bold');
        doc.text('This is page 2 of 3', 50, 720, 14);
        doc.rect(50, 500, 500, 200);
        doc.setFillColor(0.9, 1, 0.9);
        doc.fill();
        doc.setFillColor(0, 0, 0);
        doc.text('Page 2 Content', 250, 600, 16);

        // Page 3
        doc.addPage();
        doc.text('Page 3', 50, 750, 24, 'Helvetica-Bold');
        doc.text('This is page 3 of 3', 50, 720, 14);
        doc.rect(50, 500, 500, 200);
        doc.setFillColor(0.9, 0.9, 1);
        doc.fill();
        doc.setFillColor(0, 0, 0);
        doc.text('Page 3 Content', 250, 600, 16);

        await doc.save('test-multi-page-basic.pdf');
        showStatus('‚úÖ Multiple pages test completed (3 pages)!');
      } catch (error) {
        showStatus('‚ùå Error: ' + error.message, true);
        console.error(error);
      }
    }

    async function testHeadersFooters() {
      try {
        const { PDFDocument } = PDFStudio;
        const doc = new PDFDocument({
          title: 'Headers & Footers Test',
          header: {
            text: 'PDFStudio Document',
            align: 'center'
          },
          footer: {
            text: 'Confidential - Do Not Distribute',
            align: 'center'
          }
        });

        doc.text('Headers & Footers Test', 50, 750, 20, 'Helvetica-Bold');
        doc.text('Check the header and footer on this page', 50, 720, 12);

        doc.addPage();
        doc.text('Page 2', 50, 750, 20, 'Helvetica-Bold');
        doc.text('Headers and footers appear on all pages', 50, 720, 12);

        await doc.save('test-headers-footers.pdf');
        showStatus('‚úÖ Headers & footers test completed!');
      } catch (error) {
        showStatus('‚ùå Error: ' + error.message, true);
        console.error(error);
      }
    }

    async function testPageNumbers() {
      try {
        const { PDFDocument } = PDFStudio;
        const doc = new PDFDocument({
          title: 'Page Numbers Test',
          footer: {
            pageNumbers: true,
            align: 'center'
          }
        });

        for (let i = 1; i <= 5; i++) {
          if (i > 1) doc.addPage();
          doc.text(`Page ${i}`, 50, 750, 20, 'Helvetica-Bold');
          doc.text(`Check the page number at the bottom: ${i}`, 50, 720, 12);
        }

        await doc.save('test-page-numbers.pdf');
        showStatus('‚úÖ Page numbers test completed (5 pages)!');
      } catch (error) {
        showStatus('‚ùå Error: ' + error.message, true);
        console.error(error);
      }
    }

    async function testMargins() {
      try {
        const { PDFDocument } = PDFStudio;
        const doc = new PDFDocument({
          title: 'Margins Test',
          margins: { top: 100, bottom: 100, left: 100, right: 100 }
        });

        doc.text('Custom Margins Test', 100, 750, 20, 'Helvetica-Bold');
        doc.text('Margins: 100pt on all sides', 100, 720, 12);

        // Draw border to show margin area
        doc.setStrokeColor(1, 0, 0);
        doc.setLineWidth(2);
        doc.rect(100, 100, 412, 642);
        doc.stroke();

        doc.setFillColor(0, 0, 0);
        doc.text('Red border shows the margin boundaries', 100, 680, 10);

        await doc.save('test-margins.pdf');
        showStatus('‚úÖ Margins test completed!');
      } catch (error) {
        showStatus('‚ùå Error: ' + error.message, true);
        console.error(error);
      }
    }

    async function testPageBreaks() {
      try {
        const { PDFDocument } = PDFStudio;
        const doc = new PDFDocument({ title: 'Page Breaks Test' });

        doc.text('Automatic Page Breaks Test', 50, 750, 20, 'Helvetica-Bold');
        doc.text('Adding lots of content to test auto page breaks...', 50, 720, 12);

        let y = 680;
        for (let i = 1; i <= 50; i++) {
          doc.text(`Line ${i}: This is a test line to demonstrate automatic page breaks`, 50, y, 10);
          y -= 15;

          // Simulate auto page break
          if (y < 50) {
            doc.addPage();
            y = 750;
          }
        }

        await doc.save('test-page-breaks.pdf');
        showStatus('‚úÖ Page breaks test completed (multiple pages)!');
      } catch (error) {
        showStatus('‚ùå Error: ' + error.message, true);
        console.error(error);
      }
    }

    // ========== TRANSFORMATIONS ==========

    async function testRotation() {
      try {
        const { PDFDocument } = PDFStudio;
        const doc = new PDFDocument({ title: 'Rotation Test' });

        doc.text('Rotation Test', 50, 750, 20, 'Helvetica-Bold');
        doc.text('Text and shapes at different rotation angles', 50, 720, 12);

        // Rotated text (if supported)
        doc.saveGraphicsState();
        doc.translate(300, 600);
        doc.rotate(45);
        doc.setFillColor(1, 0, 0);
        doc.text('Rotated 45¬∞', 0, 0, 14, 'Helvetica-Bold');
        doc.restoreGraphicsState();

        doc.saveGraphicsState();
        doc.translate(300, 500);
        doc.rotate(90);
        doc.setFillColor(0, 1, 0);
        doc.text('Rotated 90¬∞', 0, 0, 14, 'Helvetica-Bold');
        doc.restoreGraphicsState();

        await doc.save('test-rotation.pdf');
        showStatus('‚úÖ Rotation test completed!');
      } catch (error) {
        showStatus('‚ùå Error: ' + error.message, true);
        console.error(error);
      }
    }

    async function testScaling() {
      try {
        const { PDFDocument } = PDFStudio;
        const doc = new PDFDocument({ title: 'Scaling Test' });

        doc.text('Scaling Test', 50, 750, 20, 'Helvetica-Bold');

        // Normal
        doc.setFillColor(1, 0, 0);
        doc.rect(50, 650, 50, 50);
        doc.fill();
        doc.setFillColor(0, 0, 0);
        doc.text('Normal', 50, 620, 10);

        // Scaled 1.5x
        doc.setFillColor(0, 1, 0);
        doc.rect(150, 650, 75, 75);
        doc.fill();
        doc.setFillColor(0, 0, 0);
        doc.text('1.5x', 150, 620, 10);

        // Scaled 2x
        doc.setFillColor(0, 0, 1);
        doc.rect(270, 650, 100, 100);
        doc.fill();
        doc.setFillColor(0, 0, 0);
        doc.text('2x', 270, 620, 10);

        await doc.save('test-scaling.pdf');
        showStatus('‚úÖ Scaling test completed!');
      } catch (error) {
        showStatus('‚ùå Error: ' + error.message, true);
        console.error(error);
      }
    }

    async function testTranslation() {
      try {
        const { PDFDocument } = PDFStudio;
        const doc = new PDFDocument({ title: 'Translation Test' });

        doc.text('Translation Test', 50, 750, 20, 'Helvetica-Bold');
        doc.text('Moving shapes with translate', 50, 720, 12);

        for (let i = 0; i < 5; i++) {
          doc.saveGraphicsState();
          doc.translate(50 + (i * 100), 600 - (i * 50));
          doc.setFillColor(i * 0.2, 0.5, 1 - (i * 0.2));
          doc.rect(0, 0, 60, 60);
          doc.fill();
          doc.restoreGraphicsState();
        }

        await doc.save('test-translation.pdf');
        showStatus('‚úÖ Translation test completed!');
      } catch (error) {
        showStatus('‚ùå Error: ' + error.message, true);
        console.error(error);
      }
    }

    // ========== ADVANCED ==========

    async function testLinks() {
      try {
        const { PDFDocument } = PDFStudio;
        const doc = new PDFDocument({ title: 'Links Test' });

        doc.text('Hyperlinks Test', 50, 750, 20, 'Helvetica-Bold');
        doc.text('Click the links below:', 50, 720, 12);

        doc.setFillColor(0, 0, 1);
        doc.text('Visit GitHub', 50, 680, 14, 'Helvetica');
        doc.addExternalLink({ x: 50, y: 680, width: 100, height: 14, url: 'https://github.com' });

        doc.text('Visit Google', 50, 650, 14, 'Helvetica');
        doc.addExternalLink({ x: 50, y: 650, width: 100, height: 14, url: 'https://google.com' });

        doc.text('Send Email', 50, 620, 14, 'Helvetica');
        doc.addExternalLink({ x: 50, y: 620, width: 100, height: 14, url: 'mailto:pdfstudio@ideas2code.dev' });

        await doc.save('test-links.pdf');
        showStatus('‚úÖ Links test completed!');
      } catch (error) {
        showStatus('‚ùå Error: ' + error.message, true);
        console.error(error);
      }
    }

    async function testMetadata() {
      try {
        const { PDFDocument } = PDFStudio;
        const doc = new PDFDocument({
          title: 'Metadata Test Document',
          author: 'PDFStudio Browser',
          subject: 'Testing PDF Metadata',
          keywords: 'pdf, metadata, test, browser',
          creator: 'PDFStudio v0.1.1'
        });

        doc.text('Document Metadata Test', 50, 750, 20, 'Helvetica-Bold');
        doc.text('This PDF has custom metadata', 50, 720, 12);

        doc.text('Metadata:', 50, 680, 14, 'Helvetica-Bold');
        doc.text('- Title: Metadata Test Document', 50, 660, 11);
        doc.text('- Author: PDFStudio Browser', 50, 645, 11);
        doc.text('- Subject: Testing PDF Metadata', 50, 630, 11);
        doc.text('- Keywords: pdf, metadata, test, browser', 50, 615, 11);
        doc.text('- Creator: PDFStudio v0.1.1', 50, 600, 11);

        doc.text('Check PDF properties to see metadata', 50, 560, 10);

        await doc.save('test-metadata.pdf');
        showStatus('‚úÖ Metadata test completed!');
      } catch (error) {
        showStatus('‚ùå Error: ' + error.message, true);
        console.error(error);
      }
    }

    async function testEncryption() {
      try {
        const { PDFDocument } = PDFStudio;
        const doc = new PDFDocument({
          title: 'Encryption Test',
          security: {
            userPassword: 'user123',
            ownerPassword: 'owner456',
            permissions: {
              printing: 'highResolution',
              modifying: false,
              copying: false,
              annotating: false
            }
          }
        });

        doc.text('Encryption/Security Test', 50, 750, 20, 'Helvetica-Bold');
        doc.text('This PDF is password protected', 50, 720, 12);

        doc.text('Passwords:', 50, 680, 14, 'Helvetica-Bold');
        doc.text('- User Password: user123', 50, 660, 11);
        doc.text('- Owner Password: owner456', 50, 645, 11);

        doc.text('Permissions:', 50, 610, 14, 'Helvetica-Bold');
        doc.text('- Printing: Allowed (high resolution)', 50, 590, 11);
        doc.text('- Modifying: Not allowed', 50, 575, 11);
        doc.text('- Copying: Not allowed', 50, 560, 11);
        doc.text('- Annotating: Not allowed', 50, 545, 11);

        await doc.save('test-encryption.pdf');
        showStatus('‚úÖ Encryption test completed! Password: user123');
      } catch (error) {
        showStatus('‚ùå Error: ' + error.message, true);
        console.error(error);
      }
    }

    async function testAttachments() {
      try {
        const { PDFDocument } = PDFStudio;
        const doc = new PDFDocument({ title: 'Attachments Test' });

        doc.text('File Attachments Test', 50, 750, 20, 'Helvetica-Bold');
        doc.text('This PDF has file attachments', 50, 720, 12);

        // Create dummy file buffers
        const textFile = Buffer.from('This is a text file attachment');
        const jsonFile = Buffer.from(JSON.stringify({ message: 'JSON attachment', data: [1, 2, 3] }));

        doc.attachFile({
          name: 'readme.txt',
          file: textFile,
          description: 'Text file attachment'
        });

        doc.attachFile({
          name: 'data.json',
          file: jsonFile,
          description: 'JSON data attachment'
        });

        doc.text('Attached Files:', 50, 680, 14, 'Helvetica-Bold');
        doc.text('- readme.txt (Text file)', 50, 660, 11);
        doc.text('- data.json (JSON data)', 50, 645, 11);

        doc.text('Check PDF attachments panel to view files', 50, 600, 10);

        await doc.save('test-attachments.pdf');
        showStatus('‚úÖ Attachments test completed!');
      } catch (error) {
        showStatus('‚ùå Error: ' + error.message, true);
        console.error(error);
      }
    }

    // ========== REAL-WORLD EXAMPLES ==========

    async function generateInvoice() {
      try {
        const { PDFDocument } = PDFStudio;
        const doc = new PDFDocument({
          title: 'Invoice #PDF-2024-1127',
          info: {
            Author: 'PDF UI Studio Team',
            Subject: 'Professional Plan Invoice'
          }
        });

        // Header
        doc.setFillColor(0.486, 0.227, 0.929); // #7C3AED
        doc.rect(0, 712, 612, 80);
        doc.fill();

        doc.setFillColor(1, 1, 1);
        doc.text('INVOICE', 50, 752, 28, 'Helvetica-Bold');
        doc.text('Invoice #PDF-2024-1127', 380, 757, 14);
        doc.text('Date: ' + new Date().toLocaleDateString(), 380, 737, 12);

        // Company info
        doc.setFillColor(0, 0, 0);
        doc.text('PDF UI Studio', 50, 672, 14, 'Helvetica-Bold');
        doc.text('pdfstudio@ideas2code.dev', 50, 652, 10);
        doc.text('https://pdfuistudio.io', 50, 637, 10);
        doc.text('Powered by PDFStudio Library', 50, 622, 10);

        // Client info
        doc.text('Bill To:', 350, 672, 12, 'Helvetica-Bold');
        doc.text('Enterprise Customer', 350, 652, 10);
        doc.text('Tech Solutions Inc.', 350, 637, 10);
        doc.text('customer@example.com', 350, 622, 10);

        // Table
        doc.table({
          headers: ['Description', 'Qty', 'Price', 'Total'],
          rows: [
            ['Professional Plan (Annual)', '12 months', '$7.00', '$84.00'],
            ['Visual Editor Access', 'Unlimited', 'Included', '$0.00'],
            ['AI Templates', 'Unlimited', 'Included', '$0.00'],
            ['Code Export Feature', 'Unlimited', 'Included', '$0.00'],
            ['Priority Support', '1 year', 'Included', '$0.00']
          ],
          x: 50,
          y: 472,
          width: 500
        });

        // Subtotal and total
        doc.text('Subtotal:', 380, 280, 12);
        doc.text('$84.00', 480, 280, 12);

        doc.text('Discount (Annual):', 380, 260, 12);
        doc.text('-$0.00', 480, 260, 12);

        doc.rect(350, 170, 200, 40);
        doc.setFillColor(0.95, 0.95, 0.95);
        doc.fill();

        doc.setFillColor(0, 0, 0);
        doc.text('Total Amount:', 360, 185, 14, 'Helvetica-Bold');
        doc.text('$84.00', 470, 185, 14, 'Helvetica-Bold');

        // Footer
        doc.text('Payment Terms: Due upon receipt', 50, 140, 10);
        doc.text('Thank you for choosing PDF UI Studio!', 50, 125, 10);
        doc.text('Questions? Contact: pdfstudio@ideas2code.dev', 50, 110, 10, 'Helvetica-Oblique');
        doc.text('Visit https://pdfuistudio.io for more info', 50, 95, 10, 'Helvetica-Oblique');

        await doc.save('invoice-pdf-ui-studio.pdf');
        showStatus('‚úÖ PDF UI Studio invoice generated successfully!');
      } catch (error) {
        showStatus('‚ùå Error: ' + error.message, true);
        console.error(error);
      }
    }

    async function generateReport() {
      try {
        const { PDFDocument } = PDFStudio;
        const doc = new PDFDocument({
          title: 'PDF UI Studio - Q4 2024 Growth Report',
          info: {
            Author: 'PDF UI Studio Team',
            Subject: 'Platform growth and user analytics'
          }
        });

        doc.text('PDF UI Studio - Q4 2024 Growth Report', 50, 750, 22, 'Helvetica-Bold');
        doc.text('Platform Analytics & User Growth', 50, 720, 16, 'Helvetica-Bold');

        doc.text('Generated: ' + new Date().toLocaleDateString(), 400, 750, 10);

        // Executive Summary
        doc.text('Q4 2024 was our best quarter yet! User sign-ups increased by 68%, with the Visual', 50, 690, 11);
        doc.text('Editor and AI Templates driving adoption. Over 156,000 PDFs were generated this quarter.', 50, 675, 11);

        // Performance Table
        doc.text('Key Performance Indicators', 50, 640, 14, 'Helvetica-Bold');
        doc.table({
          headers: ['Metric', 'Q3 2024', 'Q4 2024', 'Change', 'Target'],
          rows: [
            ['New Users', '2,430', '4,088', '+68%', '3,500'],
            ['PDFs Generated', '98,500', '156,000', '+58%', '120,000'],
            ['AI Templates Used', '8,240', '15,670', '+90%', '12,000'],
            ['Active Paid Users', '2,845', '4,558', '+60%', '4,000'],
            ['User Satisfaction', '4.6/5', '4.9/5', '+7%', '>4.5']
          ],
          x: 50,
          y: 450,
          width: 500
        });

        // Chart
        doc.addPage();
        doc.text('User Growth Trend 2024', 50, 750, 18, 'Helvetica-Bold');

        doc.barChart({
          data: [
            { label: 'Q1', value: 1832 },
            { label: 'Q2', value: 2156 },
            { label: 'Q3', value: 2430 },
            { label: 'Q4', value: 4088 }
          ],
          x: 80,
          y: 450,
          width: 450,
          height: 250,
          title: 'Quarterly New User Sign-Ups',
          colors: ['#7C3AED', '#6D28D9', '#5B21B6', '#4C1D95']
        });

        doc.text('Top Features by Usage', 80, 150, 14, 'Helvetica-Bold');
        doc.text('1. Visual Editor - 92% of users', 80, 130, 11);
        doc.text('2. AI Templates - 78% of users', 80, 115, 11);
        doc.text('3. Code Export - 85% of users', 80, 100, 11);
        doc.text('4. Real-time Preview - 96% of users', 80, 85, 11);

        await doc.save('pdf-ui-studio-growth-report-q4-2024.pdf');
        showStatus('‚úÖ PDF UI Studio growth report generated successfully!');
      } catch (error) {
        showStatus('‚ùå Error: ' + error.message, true);
        console.error(error);
      }
    }

    async function generateCertificate() {
      try {
        const { PDFDocument } = PDFStudio;
        const doc = new PDFDocument({
          title: 'PDF UI Studio Mastery Certificate',
          info: {
            Author: 'PDF UI Studio Academy',
            Subject: 'Certificate of Completion'
          }
        });

        // Border
        doc.setStrokeColor(0.486, 0.227, 0.929); // #7C3AED
        doc.setLineWidth(10);
        doc.rect(40, 40, 532, 722);
        doc.stroke();

        doc.setStrokeColor(0.427, 0.161, 0.714); // #6D28D9
        doc.setLineWidth(2);
        doc.rect(60, 60, 492, 682);
        doc.stroke();

        // Title
        doc.setFillColor(0.486, 0.227, 0.929); // #7C3AED
        doc.text('CERTIFICATE', 306, 680, 32, 'Helvetica-Bold');
        doc.text('OF MASTERY', 306, 640, 24, 'Helvetica-Bold');

        // Body
        doc.setFillColor(0, 0, 0);
        doc.text('This is to certify that', 306, 560, 14);

        doc.setFillColor(0.486, 0.227, 0.929);
        doc.text('Sarah Thompson', 306, 510, 28, 'Helvetica-Bold');

        doc.setFillColor(0, 0, 0);
        doc.text('has successfully completed', 306, 470, 14);

        doc.text('PDF UI Studio: Visual PDF Design Mastery', 306, 440, 16, 'Helvetica-Bold');
        doc.text('Course Topics: Visual Editor, AI Templates, Code Export', 306, 415, 11);

        doc.text('Date: ' + new Date().toLocaleDateString(), 306, 380, 12);

        // Signature line
        doc.setStrokeColor(0, 0, 0);
        doc.setLineWidth(1);
        doc.moveTo(180, 280);
        doc.lineTo(320, 280);
        doc.stroke();
        doc.text('Instructor Signature', 250, 260, 10);

        doc.moveTo(340, 280);
        doc.lineTo(480, 280);
        doc.stroke();
        doc.text('Date', 400, 260, 10);

        // Footer
        doc.setFillColor(0.486, 0.227, 0.929);
        doc.text('PDF UI Studio Academy', 306, 180, 12, 'Helvetica-Bold');
        doc.setFillColor(0.5, 0.5, 0.5);
        doc.text('Empowering Developers with Visual PDF Tools', 306, 165, 10);
        doc.text('https://pdfuistudio.io', 306, 150, 9);

        await doc.save('certificate-pdf-ui-studio-mastery.pdf');
        showStatus('‚úÖ PDF UI Studio certificate generated successfully!');
      } catch (error) {
        showStatus('‚ùå Error: ' + error.message, true);
        console.error(error);
      }
    }

    async function generateFlyer() {
      try {
        const { PDFDocument } = PDFStudio;
        const doc = new PDFDocument({
          title: 'PDF UI Studio - Visual PDF Editor',
          info: {
            Author: 'PDF UI Studio Team',
            Subject: 'Product promotional flyer'
          }
        });

        // Header
        doc.setFillColor(0.486, 0.227, 0.929); // #7C3AED
        doc.rect(0, 700, 612, 92);
        doc.fill();

        doc.setFillColor(1, 1, 1);
        doc.text('DESIGN PDFs VISUALLY', 306, 760, 16, 'Helvetica-Bold');
        doc.text('PDF UI Studio', 306, 730, 32, 'Helvetica-Bold');

        // Tagline
        doc.setFillColor(0, 0, 0);
        doc.text('Stop Coding‚ÄîStart Designing. Export Production-Ready Code Instantly.', 306, 670, 13, 'Helvetica-Oblique');

        // Features
        doc.text('Why Developers Love It', 50, 620, 18, 'Helvetica-Bold');

        const features = [
          'üé® Visual Drag & Drop Editor',
          '‚ú® AI-Powered PDF Templates',
          'üíª Export Clean JavaScript Code',
          'üéØ Real-Time Preview',
          'üöÄ Works with PDFStudio Library',
          '‚ö° No Server Required'
        ];

        let y = 580;
        features.forEach(feature => {
          doc.setFillColor(0.486, 0.227, 0.929);
          doc.circle({ x: 70, y: y + 4, radius: 3 });
          doc.fill();
          doc.setFillColor(0, 0, 0);
          doc.text(feature, 90, y, 12);
          y -= 25;
        });

        // Pricing
        doc.setFillColor(0.95, 0.92, 0.98);
        doc.rect(320, 460, 240, 160);
        doc.fill();

        doc.setFillColor(0.486, 0.227, 0.929);
        doc.text('Pricing Plans', 440, 600, 16, 'Helvetica-Bold');

        doc.setFillColor(0, 0, 0);
        doc.text('Free - $0/month', 350, 570, 12, 'Helvetica-Bold');
        doc.text('Professional - $7/month', 350, 545, 12, 'Helvetica-Bold');
        doc.text('Lifetime - $100 once', 350, 520, 12, 'Helvetica-Bold');

        doc.setFillColor(0.486, 0.227, 0.929);
        doc.text('All plans include:', 350, 490, 11);
        doc.setFillColor(0, 0, 0);
        doc.text('‚úì Visual Editor', 360, 475, 10);
        doc.text('‚úì Code Export', 360, 462, 10);

        // QR Code
        await doc.qrCode({
          data: 'https://pdfuistudio.io/?ref=flyer',
          x: 440,
          y: 280,
          size: 100
        });

        doc.text('Scan to try FREE', 440, 160, 10);

        // Footer
        doc.setFillColor(0.486, 0.227, 0.929);
        doc.rect(0, 0, 612, 60);
        doc.fill();

        doc.setFillColor(1, 1, 1);
        doc.text('pdfuistudio.io', 306, 35, 14, 'Helvetica-Bold');
        doc.text('pdfstudio@ideas2code.dev  |  Start Creating Today!', 306, 15, 10);

        await doc.save('pdf-ui-studio-flyer.pdf');
        showStatus('‚úÖ PDF UI Studio flyer generated successfully!');
      } catch (error) {
        showStatus('‚ùå Error: ' + error.message, true);
        console.error(error);
      }
    }

    async function generateResume() {
      try {
        const { PDFDocument } = PDFStudio;
        const doc = new PDFDocument({
          title: 'Resume - John Warnock - PDF UI Studio',
          info: {
            Author: 'John Warnock',
            Subject: 'Senior Product Engineer Resume'
          }
        });

        // Header
        doc.setFillColor(0.486, 0.227, 0.929); // #7C3AED
        doc.rect(0, 720, 612, 72);
        doc.fill();

        doc.setFillColor(1, 1, 1);
        doc.text('JOHN WARNOCK', 50, 762, 28, 'Helvetica-Bold');
        doc.text('Senior Product Engineer @ PDF UI Studio', 50, 735, 14);

        doc.text('pdfstudio@ideas2code.dev', 400, 762, 11);
        doc.text('github.com/pdfstudio-dev/pdfstudio', 400, 745, 11);
        doc.text('pdfuistudio.io', 420, 728, 11);

        // Summary
        doc.setFillColor(0, 0, 0);
        doc.text('PROFESSIONAL SUMMARY', 50, 690, 14, 'Helvetica-Bold');
        doc.setStrokeColor(0.486, 0.227, 0.929);
        doc.setLineWidth(2);
        doc.moveTo(50, 685);
        doc.lineTo(560, 685);
        doc.stroke();

        doc.text('Lead engineer at PDF UI Studio, specializing in visual PDF design tools and AI-powered', 50, 660, 11);
        doc.text('templates. Expert in TypeScript, React, and PDF generation libraries (PDFStudio/PDFKit).', 50, 645, 11);

        // Experience
        doc.text('WORK EXPERIENCE', 50, 610, 14, 'Helvetica-Bold');
        doc.moveTo(50, 605);
        doc.lineTo(560, 605);
        doc.stroke();

        doc.text('Senior Product Engineer', 50, 580, 12, 'Helvetica-Bold');
        doc.text('PDF UI Studio', 350, 580, 11);
        doc.text('2022 - Present', 480, 580, 11, 'Helvetica-Oblique');
        doc.text('- Built visual drag & drop PDF editor used by 12,450+ developers', 50, 560, 10);
        doc.text('- Developed AI template system generating 15,670+ templates quarterly', 50, 545, 10);
        doc.text('- Created code export feature with 85% adoption rate', 50, 530, 10);

        doc.text('Full Stack Developer', 50, 500, 12, 'Helvetica-Bold');
        doc.text('Document Solutions Inc.', 350, 500, 11);
        doc.text('2019 - 2022', 480, 500, 11, 'Helvetica-Oblique');
        doc.text('- Built PDF generation APIs processing 1M+ documents monthly', 50, 480, 10);
        doc.text('- Reduced rendering time by 60% through optimization', 50, 465, 10);
        doc.text('- Led migration to TypeScript & modern architecture', 50, 450, 10);

        // Skills
        doc.text('SKILLS', 50, 415, 14, 'Helvetica-Bold');
        doc.moveTo(50, 410);
        doc.lineTo(560, 410);
        doc.stroke();

        doc.text('Languages:', 50, 385, 11, 'Helvetica-Bold');
        doc.text('TypeScript, JavaScript, Node.js, React', 130, 385, 10);

        doc.text('PDF Tech:', 50, 370, 11, 'Helvetica-Bold');
        doc.text('PDFStudio, PDFKit, Canvas API, PDF.js', 130, 370, 10);

        doc.text('Specialties:', 50, 355, 11, 'Helvetica-Bold');
        doc.text('Visual Editors, AI/ML Integration, Developer Tools', 130, 355, 10);

        // Education
        doc.text('EDUCATION', 50, 320, 14, 'Helvetica-Bold');
        doc.moveTo(50, 315);
        doc.lineTo(560, 315);
        doc.stroke();

        doc.text('Bachelor of Science in Computer Science', 50, 290, 12, 'Helvetica-Bold');
        doc.text('Tech University', 350, 290, 11);
        doc.text('2015 - 2019', 480, 290, 11, 'Helvetica-Oblique');

        // Footer
        doc.setFillColor(0.7, 0.7, 0.7);
        doc.text('Created with PDF UI Studio - pdfuistudio.io', 306, 100, 9, 'Helvetica-Oblique');

        await doc.save('resume-john-warnock-pdf-ui-studio.pdf');
        showStatus('‚úÖ John Warnock resume generated successfully!');
      } catch (error) {
        showStatus('‚ùå Error: ' + error.message, true);
        console.error(error);
      }
    }

    // Show welcome message
    console.log('%cüé® PDFStudio Complete Test Suite Loaded!', 'color: #7C3AED; font-size: 18px; font-weight: bold;');
    console.log('%cPowered by PDF UI Studio - pdfuistudio.io', 'color: #5B21B6; font-weight: bold;');
    console.log('Click any button above to test that feature!');
  </script>
</body>
</html>
